<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 17:39:33 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SHDP-531/SHDP-531.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SHDP-531] AppmasterLauncherRunner can call exit() twice causing jvm to block</title>
                <link>https://jira.spring.io/browse/SHDP-531</link>
                <project id="10801" key="SHDP">Spring for Apache Hadoop</project>
                    <description>&lt;p&gt;Its possible for the AppmasterLauncherRunners.class to receive two appmaster state events when being used with StaticAppmaster. This causes System.exit to be called twice and is  causing the jvm to block indefinitely. From the jvm docs for Runtime.exit(),&lt;/p&gt;

&lt;p&gt;&quot;If this method is invoked after the virtual machine has begun its shutdown sequence then if shutdown hooks are being run this method will block indefinitely. If shutdown hooks have already been run and on-exit finalization has been enabled then this method halts the virtual machine with the given status code if the status is nonzero; otherwise, it blocks indefinitely.&lt;/p&gt;

&lt;p&gt;The System.exit method is the conventional and convenient means of invoking this method.&quot;&lt;/p&gt;

&lt;p&gt;I get two of these lines in my logs, the second being the last entry.&lt;br/&gt;
INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-2&amp;#93;&lt;/span&gt; &amp;#8212; CommandLineRunnerSupport: About to exit using code= 0&lt;/p&gt;</description>
                <environment>Linux x64, CDH5.4, Java 1.7.0_67-b01</environment>
        <key id="66457">SHDP-531</key>
            <summary>AppmasterLauncherRunner can call exit() twice causing jvm to block</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://jira.spring.io/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Complete</resolution>
                                        <assignee username="jvalkeal">Janne Valkealahti</assignee>
                                    <reporter username="jmarchioni">Jason Marchioni</reporter>
                        <labels>
                    </labels>
                <created>Mon, 26 Oct 2015 18:35:10 +0000</created>
                <updated>Tue, 15 Dec 2015 15:23:56 +0000</updated>
                            <resolved>Fri, 30 Oct 2015 08:16:50 +0000</resolved>
                                    <version>2.3.0.RC1</version>
                                    <fixVersion>2.3.0 RC2</fixVersion>
                                    <component>YARN</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="120926" author="jmarchioni" created="Mon, 26 Oct 2015 18:41:46 +0000"  >&lt;p&gt;It seems that AbstractAppmaster&apos;s doStop() method is responsible for for the second notifyComplete(). This causes the container to never exit even though it is in the finished state,  thus not releasing its resources back to yarn. The first call to notifyComplete() comes from the fact that all containers have successfully exited.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="120952" author="jvalkeal" created="Tue, 27 Oct 2015 08:45:46 +0000"  >&lt;p&gt;thanks for reporting this. I&apos;ll try to see what&apos;s going on here!&lt;/p&gt;</comment>
                            <comment id="121084" author="jvalkeal" created="Fri, 30 Oct 2015 08:16:50 +0000"  >&lt;p&gt;Fixed per &lt;a href=&quot;https://github.com/spring-projects/spring-hadoop/commit/43dc323ef43d9ff42efc358253c9938571fbd477&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/spring-projects/spring-hadoop/commit/43dc323ef43d9ff42efc358253c9938571fbd477&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 27 Oct 2015 08:45:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08uz3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>